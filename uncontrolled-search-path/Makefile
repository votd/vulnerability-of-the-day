
run: clean hello.o evil.so
	@echo "\n"
	gcc -o hello hello.o
	@echo "\n=== NORMAL RUN ==="
	./hello
	@echo "\n\n=== EVIL RUN ==="
	LD_PRELOAD=./evil.so ./hello
	@echo "\n"
	ldd hello
	LD_PRELOAD=./evil.so ldd hello


clean:
	rm -f *.o
	rm -f *.so
	rm -f hello
evil.so: 
	gcc -shared -fPIC -o evil.so evil.c

hello.o: 
	gcc -c hello.c


